@using System.Collections.Immutable
@inject FragmentMap FragmentMap
@{
    if (Components is null) return;
    RenderFragment fragment = renderTreeBuilder =>
    {
        for (var i = 0; i < Components.Length; i++)
        {
            renderTreeBuilder.OpenComponent(i, Components[i]);
            renderTreeBuilder.CloseComponent();
        }
    };
    @fragment
}

@code {

    [Parameter]
    public string Name { get; set; }

    private Type[] Components { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        Components = FragmentMap[Name].ToArray();
    }

}
